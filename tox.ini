[tox]
envlist = py310, py311, py312, py313, base, full
skip_missing_interpreters = true

[testenv]
setenv =
    PYTHONPATH = {toxinidir}/src
passenv =
    USERNAME
    USER
deps =
    pytest
    pytest-cov
commands =
    pytest {posargs:tests/unit -q}


# Base environment: validates core functionality with lightweight dependencies.
# Intended for quick smoke/unit verification.
[testenv:base]
basepython = python3.13
commands =
    python -c "import sys; print(f'Python {sys.version}')"
    python -c "import torch; print('Torch version:', torch.__version__)"
    pytest tests/unit -v --tb=long -W default

# Full environment: validates features that require optional/full dependency set.
# Intended for broader functional/integration verification.
[testenv:full]
basepython = python3.13
usedevelop = true
deps =
    .[full]
commands =
    python -c "import sys; print(f'Python {sys.version}')"
    pytest tests/functional -v
